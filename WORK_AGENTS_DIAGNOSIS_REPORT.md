# å·¥ä½œæ™ºèƒ½ä½“é…ç½®è¯Šæ–­æŠ¥å‘Š

## è¯Šæ–­æ¦‚è¿°

ç»è¿‡ç³»ç»Ÿåˆ†æ5ä¸ªå·¥ä½œæ™ºèƒ½ä½“é…ç½®ï¼Œå‘ç°äº†å¤šä¸ªç³»ç»Ÿæ€§é—®é¢˜ï¼Œéœ€è¦è¿›è¡Œå…¨é¢æ”¹è¿›ã€‚

## å‘ç°çš„é—®é¢˜

### 1. å·¥å…·æ˜ å°„ä¸ä¸€è‡´é—®é¢˜ âš ï¸ **ä¸¥é‡**

**é—®é¢˜æè¿°**ï¼š
- å„æ™ºèƒ½ä½“å¯¹åŒä¸€å·¥å…·çš„å¼•ç”¨æ–¹å¼ä¸ç»Ÿä¸€
- å·¥å…·åç§°åœ¨é…ç½®å’Œå®é™…å®ç°ä¹‹é—´å­˜åœ¨å·®å¼‚
- ç¼ºå°‘ç»Ÿä¸€çš„å·¥å…·ç‰ˆæœ¬æ§åˆ¶

**å…·ä½“é—®é¢˜**ï¼š
```yaml
# DataAnalysisAgent
- calculate_ratios: è®¡ç®—æ‰€æœ‰æ ‡å‡†è´¢åŠ¡æ¯”ç‡
- analyze_trends_tool: åˆ†æè´¢åŠ¡æ•°æ®è¶‹åŠ¿

# FinancialAnalysisAgent  
- æ²¡æœ‰æ˜ç¡®çš„å·¥å…·åˆ—è¡¨ï¼Œåªæœ‰å·¥å…·åŒ…å¼•ç”¨

# ChartGeneratorAgent
- generate_charts: ç”Ÿæˆè´¢åŠ¡æ•°æ®å›¾è¡¨
- execute_python_code_enhanced: å¢å¼ºç‰ˆPythonä»£ç æ‰§è¡Œå™¨

# ReportAgent
- generate_comparison_report: ç”Ÿæˆå…¬å¸å¯¹æ¯”åˆ†ææŠ¥å‘Š
- save_text_report: ç”Ÿæˆå¹¶ä¿å­˜MDæ ¼å¼çš„è´¢åŠ¡åˆ†ææŠ¥å‘Š
- save_analysis_report: ä¿å­˜AIåˆ†æç»“æœåˆ°å„ç§æ ¼å¼çš„æ–‡ä»¶
- save_pdf_report: ç”Ÿæˆå¹¶ä¿å­˜PDFæ ¼å¼çš„è´¢åŠ¡åˆ†ææŠ¥å‘Š
```

### 2. é…ç½®è¿‡åº¦å¤æ‚é—®é¢˜ âš ï¸ **ä¸¥é‡**

**é—®é¢˜æè¿°**ï¼š
- ReportAgenté…ç½®æ–‡ä»¶è¾¾åˆ°270+è¡Œï¼ŒåŒ…å«å¤§é‡é‡å¤é…ç½®
- é…ç½®å‚æ•°ä¸å®é™…å·¥å…·åŠŸèƒ½ä¸åŒ¹é…
- ç¼ºå°‘é…ç½®ä¼˜å…ˆçº§å’Œç»§æ‰¿å…³ç³»

**å…·ä½“é—®é¢˜**ï¼š
```yaml
# ReportAgentä¸­çš„é‡å¤é…ç½®
quality_control:
  content_validation: true
  fact_checking: true
  consistency_check: true
  completeness_check: true
  formatting_check: true
  validate_data_completeness: true
  validate_chart_integration: true
  validate_html_format: true
  validate_pdf_generation: true
  validate_timestamp_accuracy: true
  ensure_full_agent_data_integration: true
  verify_all_data_sources: true
  confirm_report_contains_complete_data: true
  check_date_consistency: true
  enforce_complete_html_structure: true
  verify_pdf_date_parameter: true
```

### 3. æ•°æ®ä¾èµ–é“¾è„†å¼±é—®é¢˜ âš ï¸ **ä¸­ç­‰**

**é—®é¢˜æè¿°**ï¼š
- æ™ºèƒ½ä½“é—´çš„æ•°æ®ä¼ é€’æ ¼å¼çº¦å®šä¸æ˜ç¡®
- ç¼ºå°‘ç»Ÿä¸€çš„æ•°æ®éªŒè¯æœºåˆ¶
- é”™è¯¯ä¼ æ’­å’Œæ¢å¤æœºåˆ¶ä¸å®Œå–„

**æ•°æ®æµé—®é¢˜**ï¼š
```
DataAgent â†’ DataAnalysisAgent â†’ FinancialAnalysisAgent â†’ ReportAgent
    â†“             â†“                      â†“                    â†“
  åŸå§‹æ•°æ®      è®¡ç®—æ¯”ç‡                ä¸“ä¸šè§£è¯»            æœ€ç»ˆæŠ¥å‘Š
```

### 4. å·¥å…·è¡Œä¸ºé…ç½®æ··ä¹± âš ï¸ **ä¸­ç­‰**

**é—®é¢˜æè¿°**ï¼š
- æ··åˆä½¿ç”¨ä¸åŒçš„å·¥å…·è¡Œä¸ºé…ç½®
- ç¼ºå°‘ç»Ÿä¸€çš„è°ƒç”¨ç­–ç•¥
- å¯èƒ½å¯¼è‡´å·¥å…·è°ƒç”¨å¤±è´¥æˆ–é‡å¤

**è¡Œä¸ºé…ç½®å·®å¼‚**ï¼š
```yaml
# DataAgent
tool_use_behavior: "stop_on_first_tool"

# DataAnalysisAgent  
tool_use_behavior: "run_llm_again"

# FinancialAnalysisAgent
tool_use_behavior: "run_llm_again"

# ReportAgent
tool_use_behavior: "run_llm_again"

# ChartGeneratorAgent
tool_use_behavior: "run_llm_again"
```

### 5. å·¥ä½œç©ºé—´ç®¡ç†é—®é¢˜ âš ï¸ **ä¸­ç­‰**

**é—®é¢˜æè¿°**ï¼š
- å·¥ä½œç©ºé—´è·¯å¾„é…ç½®ä¸ç»Ÿä¸€
- ç¼ºå°‘æ–‡ä»¶æ¸…ç†å’Œç‰ˆæœ¬æ§åˆ¶æœºåˆ¶
- å¯èƒ½å­˜åœ¨è·¯å¾„å†²çªå’Œå®‰å…¨é—®é¢˜

**è·¯å¾„é…ç½®å·®å¼‚**ï¼š
```yaml
# å¤§éƒ¨åˆ†æ™ºèƒ½ä½“
workspace_root: "./stock_analysis_workspace"

# ä½†åœ¨æŸäº›é…ç½®ä¸­
output_dir: "./run_workdir"
```

## å·¥å…·åŒ…é…ç½®åˆ†æ

### Financial Analysis Tool Kit
**é…ç½®æ–‡ä»¶**: `configs/tools/financial_analysis.yaml`
**çŠ¶æ€**: âœ… **é…ç½®è‰¯å¥½**
- å·¥å…·åˆ—è¡¨æ¸…æ™°æ˜ç¡®
- å‚æ•°é…ç½®åˆç†
- æ”¯æŒçš„åŠŸèƒ½å®Œæ•´

### Report Saver Tool Kit  
**é…ç½®æ–‡ä»¶**: `configs/tools/report_saver.yaml`
**çŠ¶æ€**: âš ï¸ **é…ç½®ç®€åŒ–ä½†åŠŸèƒ½ä¸å®Œæ•´**
- å·¥å…·åˆ—è¡¨ç›¸å¯¹ç®€å•
- ç¼ºå°‘ä¸€äº›é«˜çº§åŠŸèƒ½é…ç½®
- ä¸ReportAgentçš„æœŸæœ›å­˜åœ¨å·®è·

### Tabular Data Tool Kit
**é…ç½®æ–‡ä»¶**: `configs/tools/tabular.yaml`
**çŠ¶æ€**: âœ… **é…ç½®åˆç†**
- åŸºç¡€é…ç½®å®Œæ•´
- æ”¯æŒå›¾è¡¨ç”ŸæˆåŠŸèƒ½

## æ™ºèƒ½ä½“é…ç½®è¯„ä¼°

### DataAgent âœ… **é…ç½®è‰¯å¥½**
- é…ç½®ç®€æ´æ¸…æ™°
- å·¥å…·å®šä¹‰æ˜ç¡®
- å·¥ä½œæµç¨‹åˆç†

### DataAnalysisAgent âœ… **é…ç½®è‰¯å¥½**
- é…ç½®ç»“æ„åˆç†
- å·¥å…·ä½¿ç”¨è§„èŒƒ
- åˆ†ææµç¨‹æ¸…æ™°

### FinancialAnalysisAgent âš ï¸ **éœ€è¦æ”¹è¿›**
- ç¼ºå°‘æ˜ç¡®çš„å·¥å…·åˆ—è¡¨
- åˆ†ææµç¨‹æè¿°ä¸å¤Ÿå…·ä½“
- è¾“å‡ºæ ¼å¼å®šä¹‰æ¨¡ç³Š

### ReportAgent âŒ **éœ€è¦é‡å¤§æ”¹è¿›**
- é…ç½®æ–‡ä»¶è¿‡åº¦å¤æ‚
- å·¥å…·é…ç½®ä¸å®é™…åŠŸèƒ½ä¸åŒ¹é…
- è´¨é‡æ§åˆ¶å‚æ•°è¿‡äºç»†åŒ–

### ChartGeneratorAgent âœ… **å·²æ”¹è¿›**
- æœ€è¿‘å·²ç»è¿‡æ™ºèƒ½åŒ–å¢å¼º
- å·¥å…·ç±»å‹æ”¯æŒå®Œæ•´
- é”™è¯¯å¤„ç†æœºåˆ¶å®Œå–„

## æ”¹è¿›ä¼˜å…ˆçº§

### é«˜ä¼˜å…ˆçº§ ğŸ”´
1. **ç»Ÿä¸€å·¥å…·æ˜ å°„** - è§£å†³å·¥å…·ä¸ä¸€è‡´é—®é¢˜
2. **ç®€åŒ–ReportAgenté…ç½®** - å‡å°‘é…ç½®å¤æ‚åº¦
3. **å®Œå–„FinancialAnalysisAgent** - æ˜ç¡®å·¥å…·å®šä¹‰

### ä¸­ä¼˜å…ˆçº§ ğŸŸ¡
4. **ç»Ÿä¸€æ•°æ®æ ¼å¼** - å»ºç«‹æ ‡å‡†æ•°æ®ä¼ é€’æ ¼å¼
5. **ä¼˜åŒ–å·¥å…·è¡Œä¸ºç­–ç•¥** - ç»Ÿä¸€è°ƒç”¨è¡Œä¸º
6. **å·¥ä½œç©ºé—´ç®¡ç†** - ç»Ÿä¸€è·¯å¾„å’Œæ–‡ä»¶ç®¡ç†

### ä½ä¼˜å…ˆçº§ ğŸŸ¢
7. **æ€§èƒ½ä¼˜åŒ–** - ç¼“å­˜å’Œå¹¶å‘å¤„ç†
8. **ç›‘æ§å’Œæ—¥å¿—** - å®Œå–„ç›‘æ§æœºåˆ¶

## è¾¹ç•Œæµ‹è¯•éœ€æ±‚

### æ•°æ®è¾¹ç•Œæµ‹è¯•
- ç©ºæ•°æ®å¤„ç†
- è¶…å¤§æ•°æ®é‡å¤„ç†
- æ¶æ„è¾“å…¥å¤„ç†
- æ ¼å¼å¼‚å¸¸æ•°æ®å¤„ç†

### åŠŸèƒ½è¾¹ç•Œæµ‹è¯•  
- å·¥å…·é“¾æ–­è·¯æµ‹è¯•
- å¹¶å‘è®¿é—®æµ‹è¯•
- ç½‘ç»œå¼‚å¸¸æ¢å¤æµ‹è¯•
- æ–‡ä»¶ç³»ç»Ÿå¼‚å¸¸æµ‹è¯•

### æ€§èƒ½è¾¹ç•Œæµ‹è¯•
- é•¿æ—¶é—´è¿è¡Œæµ‹è¯•
- å†…å­˜æ³„æ¼æ£€æµ‹
- CPUä½¿ç”¨ç‡ç›‘æ§
- ç£ç›˜ç©ºé—´ç®¡ç†

## æ”¹è¿›å»ºè®®

### ç«‹å³è¡ŒåŠ¨é¡¹
1. åˆ›å»ºæ ‡å‡†çš„å·¥å…·é…ç½®æ¨¡æ¿
2. é‡æ„ReportAgenté…ç½®æ–‡ä»¶
3. å®Œå–„FinancialAnalysisAgenté…ç½®

### ä¸­æœŸæ”¹è¿›é¡¹
1. å»ºç«‹æ™ºèƒ½ä½“é—´çš„æ ‡å‡†æ•°æ®æ ¼å¼
2. ç»Ÿä¸€å·¥ä½œç©ºé—´ç®¡ç†ç­–ç•¥
3. å®Œå–„é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶

### é•¿æœŸä¼˜åŒ–é¡¹
1. å®ç°æ™ºèƒ½ä½“æ€§èƒ½ç›‘æ§
2. å»ºç«‹è‡ªåŠ¨åŒ–æµ‹è¯•ä½“ç³»
3. å®Œå–„æ–‡æ¡£å’Œæœ€ä½³å®è·µ

è¿™ä¸ªè¯Šæ–­æŠ¥å‘Šä¸ºåç»­çš„ç³»ç»Ÿæ€§æ”¹è¿›æä¾›äº†æ˜ç¡®çš„æ–¹å‘å’Œä¼˜å…ˆçº§æŒ‡å¯¼ã€‚